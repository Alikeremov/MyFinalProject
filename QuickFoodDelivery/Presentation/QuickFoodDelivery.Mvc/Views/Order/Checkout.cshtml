@using Microsoft.Extensions.Options;
@using QuickFoodDelivery.Persistence.DAL;
@model OrderCreateVm
@inject IOptions<StripeSettings> Stripe
@{
	decimal totalprice = 0;
}

<head>
	<link href="~/assets/css/skins/square/grey.css" rel="stylesheet">
</head>
<section class="parallax-window" id="short" data-parallax="scroll" data-image-src="/assets/img/sub_header_cart.jpg" data-natural-width="1400" data-natural-height="350">
	<div id="subheader">
		<div id="sub_content">
			<h1>Place your order</h1>
			<div class="bs-wizard row">
				<div class="col-4 bs-wizard-step active">
					<div class="text-center bs-wizard-stepnum"><strong>1.</strong> Your details and Payment</div>
					<div class="progress">
						<div class="progress-bar"></div>
					</div>
					<a href="#0" class="bs-wizard-dot"></a>
				</div>
				<div class="col-4 bs-wizard-step disabled">
					<div class="text-center bs-wizard-stepnum"><strong>2.</strong> Finish!</div>
					<div class="progress">
						<div class="progress-bar"></div>
					</div>
					<a href="cart_3.html" class="bs-wizard-dot"></a>
				</div>
			</div><!-- End bs-wizard -->
		</div><!-- End sub_content -->
	</div><!-- End subheader -->
</section><!-- End section -->
<div class="container margin_60_35">
	<div class="row">
		<div class="col-lg-3">
			<div class="box_style_2 info d-none d-sm-block">
				<h4 class="nomargin_top">Delivery time <i class="icon_clock_alt float-right"></i></h4>
				<p>
					Lorem ipsum dolor sit amet, in pri partem essent. Qui debitis meliore ex, tollit debitis conclusionemque te eos.
				</p>
				<hr>
				<h4>Secure payment <i class="icon_creditcard float-right"></i></h4>
				<p>
					Lorem ipsum dolor sit amet, in pri partem essent. Qui debitis meliore ex, tollit debitis conclusionemque te eos.
				</p>
			</div><!-- End box_style_1 -->
			<div class="box_style_2 d-none d-sm-block" id="help">
				<i class="icon_lifesaver"></i>
				<h4>Need <span>Help?</span></h4>
				<a href="tel://004542344599" class="phone">+45 423 445 99</a>
				<small>Monday to Friday 9.00am - 7.30pm</small>
			</div>
		</div><!-- End col -->
		<div class="col-lg-6">
			<form method="post" onchange="this.form.submit()">
				<div class="box_style_2" id="order_process">
					<h2 class="inner">Your order details</h2>
					<div class="form-group">
						<label asp-for="UserName">UserName</label>
						<input asp-for="UserName" class="form-control" placeholder="UserName">
						<span asp-validation-for="UserName"></span>
					</div>
					<div class="form-group">
						<label asp-for="UserSurname">UserSurname</label>
						<input asp-for="UserSurname" class="form-control" placeholder="UserSurname">
						<span asp-validation-for="UserSurname"></span>
					</div>
					<div class="form-group">
						<label asp-for="UserEmail">UserEmail</label>
						<input asp-for="UserEmail" class="form-control" placeholder="UserEmail">
						<span asp-validation-for="UserEmail"></span>
					</div>
					<div class="form-group">
						<label asp-for="UserPhoneNumber">UserPhoneNumber</label>
						<input asp-for="UserPhoneNumber" class="form-control" placeholder="UserPhoneNumber">
						<span asp-validation-for="UserPhoneNumber"></span>
					</div>
					<div class="form-group">
						<label asp-for="UserAddress">UserAddress</label>
						<input asp-for="UserAddress" class="form-control" placeholder="UserAddress">
						<span asp-validation-for="UserAddress"></span>
					</div>
					<hr>
					<div class="row">
						<div class="form-group">
							<label asp-for="NotesForRestaurant">Notes For Restaurant</label>
							<input asp-for="NotesForRestaurant" class="form-control" placeholder="NotesForRestaurant">
							<span asp-validation-for="NotesForRestaurant"></span>
						</div>
					</div>
					<script src="//checkout.stripe.com/v2/checkout.js"
							class="stripe-button"
							data-key="@Stripe.Value.Publishablekey"
							data-amount="@ViewBag.Total"
							data-name="Your project name"
							data-locale="en"
							data-discription="Sample charge"
							data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
							data-zip-code="true">
					</script>
				</div><!-- End box_style_1 -->
				
			</form>
		</div><!-- End col -->
		<div class="col-lg-3" id="sidebar">
			<div class="theiaStickySidebar">
				<div id="cart_box">
					<h3>Your order <i class="icon_cart_alt float-right"></i></h3>
					@foreach (var item in Model.OrderItemVms)
					{
						totalprice += item.Count * item.Price;
						<table class="table table_summary">
							<tbody>
								<tr>
									<td>
										 <strong>@item.Count x</strong> @item.MealName
									</td>
									<td>
										<strong class="float-right">$@(item.Count * item.Price)</strong>
									</td>
								</tr>
							</tbody>
						</table>
						<hr>
					}
					<hr>
					<table class="table table_summary">
						<tbody>
							<tr>
								<td>
									Delivery fee <span class="float-right">$@(Model.RestaurantAddreses?.Count * 10)</span>
								</td>
							</tr>
							<tr>
								<td class="total">
									TOTAL <span class="float-right">$@(totalprice +Model.RestaurantAddreses?.Count * 10)</span>
								</td>
							</tr>
						</tbody>
					</table>
					<hr>
					<a class="btn_full" asp-action="Checkout" asp-controller="order">Order now</a>
				</div><!-- End cart_box -->
			</div><!-- End theiaStickySidebar -->
		</div><!-- End col -->
	</div><!-- End row -->
</div><!-- End container -->
<script src="~/assets/js/jquery-3.7.0.min.js"></script>
<script src="~/assets/js/common_scripts_min.js"></script>
<script src="~/assets/js/functions.js"></script>
<script src="assets/validate.js"></script>

<!-- SPECIFIC SCRIPTS -->
<script src="~/assets/js/ResizeSensor.min.js"></script>
<script src="~/assets/js/theia-sticky-sidebar.min.js"></script>
<script>
	jQuery('#sidebar').theiaStickySidebar({
		additionalMarginTop: 80
	});
</script>